<div class="auth-container">
  <h1>{{ requiresOTP ? 'Verify Email' : 'Create Account' }}</h1>
  <p class="subtitle">{{ requiresOTP ? 'Enter the OTP code sent to your email' : 'Start your journey to consistency' }}</p>
  
  <div class="error-message" *ngIf="error">{{ error }}</div>
  
  <div class="success-message" *ngIf="requiresOTP && !error">
    <p>OTP sent to <strong>{{ email }}</strong></p>
    <p style="font-size: 12px; margin-top: 8px; opacity: 0.8;">Check your email for the 6-digit code. It expires in 10 minutes.</p>
  </div>
  
  <form class="auth-form" (ngSubmit)="onSubmit()">
    <div *ngIf="!requiresOTP">
    <div class="form-group">
      <label>Username</label>
        <input type="text" [(ngModel)]="username" name="username" required autofocus [disabled]="isLoading">
    </div>
    
    <div class="form-group">
      <label>Email</label>
        <input type="email" [(ngModel)]="email" name="email" required [disabled]="isLoading">
    </div>
    
    <div class="form-group">
      <label>Password</label>
        <input type="password" [(ngModel)]="password" name="password" required [disabled]="isLoading">
      <div class="password-hint">Must be at least 6 characters</div>
    </div>
    
    <div class="form-group">
      <label>Confirm Password</label>
        <input type="password" [(ngModel)]="confirmPassword" name="confirm_password" required [disabled]="isLoading">
      </div>
      
      <button type="submit" class="btn-primary btn-full" [disabled]="isLoading">
        {{ isLoading ? 'Signing up...' : 'Sign Up' }}
      </button>
    </div>
    
    <div *ngIf="requiresOTP">
      <div class="form-group">
        <label>OTP Code</label>
        <input 
          type="text" 
          [(ngModel)]="otp" 
          name="otp" 
          placeholder="Enter 6-digit code"
          maxlength="6"
          pattern="[0-9]{6}"
          required 
          autofocus
          [disabled]="isLoading">
        <div class="password-hint">Enter the 6-digit code from your email</div>
      </div>
      
      <button type="submit" class="btn-primary btn-full" [disabled]="isLoading">
        {{ isLoading ? 'Verifying...' : 'Verify & Create Account' }}
      </button>
      
      <button type="button" class="btn-secondary btn-full" (click)="requiresOTP = false; otp = ''" [disabled]="isLoading" style="margin-top: 10px;">
        Back to Signup
      </button>
    </div>
  </form>
  
  <div class="auth-link">
    Already have an account? <a routerLink="/login">Login</a>
  </div>
</div>
